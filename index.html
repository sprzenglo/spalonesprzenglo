<html lang="pl">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>sprzenglo spalone</title>
    <style>
      body {
        background: #f7f7f7;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        text-align: center;
      }
      h1 {
        margin-top: 30px;
      }
      #game {
        background: #fff;
        border: 2px solid #333;
        margin: 40px auto 0 auto;
        display: block;
      }
      #score {
        font-size: 20px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <main>
      <center>
        <h1>spalone sprzeng≈Ço</h1>
        <hr>
      </center>
      <canvas id="game" width="600" height="150"></canvas>
      <div id="score">Score: 0</div>
      <button id="startBtn">Start</button>
      <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        let dino = { x: 50, y: 110, w: 40, h: 40, vy: 0, jumping: false };
        let obstacles = [];
        let score = 0;
        let gameOver = false;
        let gravity = 1.1; // More gravity for snappier jump
        let speed = 5; // Slightly slower for easier jumps
        let paused = true;
        let started = false;
        let obstacleTimer = 0;

        function drawDino() {
          ctx.fillStyle = '#444';
          ctx.fillRect(dino.x, dino.y, dino.w, dino.h);
          ctx.fillStyle = '#222';
          ctx.fillRect(dino.x + 28, dino.y + 10, 10, 10);
        }

        function drawObstacles() {
          ctx.fillStyle = '#228B22';
          obstacles.forEach(o => {
            ctx.fillRect(o.x, o.y, o.w, o.h);
          });
        }

        function updateObstacles() {
          obstacleTimer++;
          // Obstacles appear less frequently and spaced out
          if (obstacleTimer > 70 + Math.random()*60) {
            obstacles.push({ x: 600, y: 120, w: 20 + Math.random()*20, h: 30 });
            obstacleTimer = 0;
          }
          obstacles.forEach(o => o.x -= speed);
          obstacles = obstacles.filter(o => o.x + o.w > 0);
        }

        function checkCollision() {
          for (let o of obstacles) {
            if (
              dino.x < o.x + o.w &&
              dino.x + dino.w > o.x &&
              dino.y < o.y + o.h &&
              dino.y + dino.h > o.y
            ) {
              return true;
            }
          }
          return false;
        }

        function updateDino() {
          dino.y += dino.vy;
          dino.vy += gravity;
          if (dino.y > 110) {
            dino.y = 110;
            dino.vy = 0;
            dino.jumping = false;
          }
        }

        function drawGround() {
          ctx.fillStyle = '#888';
          ctx.fillRect(0, 145, 600, 5);
        }

        function gameLoop() {
          if (!started || paused) return;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawGround();
          drawDino();
          drawObstacles();
          updateObstacles();
          updateDino();
          if (checkCollision()) {
            ctx.font = '30px Arial';
            ctx.fillStyle = 'red';
            ctx.fillText('Game Over!', 220, 80);
            gameOver = true;
            started = false;
            document.getElementById('startBtn').disabled = false;
            return;
          }
          score++;
          document.getElementById('score').textContent = 'Score: ' + score;
          requestAnimationFrame(gameLoop);
        }

        document.addEventListener('keydown', function(e) {
          if ((e.code === 'Space' || e.key === 'w' || e.key === 'ArrowUp') && !dino.jumping && !gameOver && started && !paused) {
            dino.vy = -15; // Higher jump for easier obstacle clearance
            dino.jumping = true;
          }
          if (gameOver && (e.code === 'Space' || e.key === 'r')) {
            // Restart
            obstacles = [];
            score = 0;
            gameOver = false;
            dino.y = 110;
            dino.vy = 0;
            started = true;
            paused = false;
            document.getElementById('startBtn').disabled = true;
            requestAnimationFrame(gameLoop);
          }
          if (e.key === 'p' || e.key === 'P') {
            if (started && !gameOver) {
              paused = !paused;
              if (!paused) requestAnimationFrame(gameLoop);
            }
          }
        });

        document.getElementById('startBtn').onclick = function() {
          if (!started) {
            obstacles = [];
            score = 0;
            gameOver = false;
            dino.y = 110;
            dino.vy = 0;
            started = true;
            paused = false;
            this.disabled = true;
            requestAnimationFrame(gameLoop);
          }
        };

        // Initial state: show ground and dino only
        function drawInitial() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawGround();
          drawDino();
        }
        drawInitial();
      </script>
        <section>
            <p>press P to pause</p>

        </section>
    </main>
  </body>
</html>

